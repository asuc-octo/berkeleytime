# Template: https://github.com/elastic/helm-charts/blob/master/filebeat/values.yaml

filebeatConfig:
  # How to Automate Elasticsearch Index Creation
  # https://cloudhero.io/automate-elasticsearch-index-creation
  filebeat.yml: |
    output:
      logstash:
        hosts: ["bt-logstash-logstash-headless:5044"]
    setup:
      kibana:
        host: bt-kibana-kibana:5601
        path: /kibana
      dashboards:
        enabled: false
        retry:
          enabled: false
      ilm:
        enabled: true
      template:
        name: "k8s"
        pattern: "k8s-*"
        enabled: false
    logging.level: info
    filebeat:
      autodiscover:
        providers:
          - type: kubernetes
            node: ${NODE_NAME}
            hints.enabled: true
            hints.default_config:
              type: container
              paths:
                - /var/log/containers/*${data.kubernetes.container.id}.log
tolerations:
  - key: node-role.kubernetes.io/master
    operator: Exists
    effect: NoSchedule
