# path in host machine. should depend on environment and be different for each mongo pod.
hostPath: /data/prod/db

mongodb:
  commonLabels:
    env: prod

  image:
    tag: 7.0.5

  architecture: replicaset
  arbiter:
    enabled: false
  replicaCount: 1

  auth:
    enabled: false

  persistence:
    storageClass: manual

    # path in pod. should be same for all mongo pods.
    size: 10Gi

  # required for persistence. without, data is not saved across pod restarts.
  volumePermissions:
    enabled: true

  # Mount migrations ConfigMap at /migrations (same path as Docker Compose).
  # When installing, set the ConfigMap name to <release-name>-migrations, e.g.:
  #   helm upgrade bt-prod-mongo ./infra/mongo --set mongodb.extraVolumes[0].configMap.name=bt-prod-mongo-migrations
  extraVolumes:
    - name: migrations
      configMap:
        name: "RELEASE_NAME-migrations"  # Override with --set mongodb.extraVolumes[0].configMap.name=<release-name>-migrations
  extraVolumeMounts:
    - name: migrations
      mountPath: /migrations
      readOnly: true
